#jinja2: trim_blocks: True, lstrip_blocks: True
# {{ ansible_managed }}

client

remote          {{ client[openvpn_client_name]['remote'] }}
port            {{ client[openvpn_client_name]['port'] }}
proto           {{ client[openvpn_client_name]['proto'] }}
dev             {{ client[openvpn_client_name]['device'] }}

ca              {{ openvpn_directory }}/keys/{{ openvpn_client_name }}/ca.crt
cert            {{ openvpn_directory }}/keys/{{ openvpn_client_name }}/{{ client[openvpn_client_name]['cert'] }}
key             {{ openvpn_directory }}/keys/{{ openvpn_client_name }}/{{ client[openvpn_client_name]['key'] }}

remote-cert-tls server

ping            20
ping-restart    45
ping-timer-rem
persist-tun
persist-key
; comp-lzo

{% if client[openvpn_client_name]['tls_auth.enabled'] is defined and
      client[openvpn_client_name]['tls_auth.enabled'] %}
tls-auth      {{ openvpn_directory }}/keys/{{ openvpn_client_name }}/ta.key 0 # This file is secret
{% endif %}

status        {{ openvpn_logging.directory }}/{{ openvpn_logging.status }}

cipher        {{ openvpn_server.cipher }}

{% if openvpn_logging.append | bool | default('false') %}
log-append    {{ openvpn_logging.directory }}/{{ openvpn_logging.file }}
{% else %}
log           {{ openvpn_logging.directory }}/{{ openvpn_logging.file }}
{% endif %}

# log             /var/log/openvpn/{{ openvpn_client_name }}.log

verb          {{ openvpn_logging.verbosity }}
mute          {{ openvpn_logging.mute }}
